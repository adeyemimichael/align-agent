{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 22, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayobami/align/lib/prisma.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client'\nimport { PrismaPg } from '@prisma/adapter-pg'\nimport pg from 'pg'\n\nconst globalForPrisma = globalThis as unknown as {\n  prisma: PrismaClient | undefined\n}\n\nfunction createPrismaClient() {\n  const connectionString = process.env.DATABASE_URL\n  if (!connectionString) {\n    throw new Error('DATABASE_URL environment variable is not set')\n  }\n\n  const pool = new pg.Pool({ connectionString })\n  const adapter = new PrismaPg(pool)\n  \n  return new PrismaClient({ adapter })\n}\n\nexport const prisma = globalForPrisma.prisma ?? createPrismaClient()\n\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;;;;;;AAEA,MAAM,kBAAkB;AAIxB,SAAS;IACP,MAAM,mBAAmB,QAAQ,GAAG,CAAC,YAAY;IACjD,IAAI,CAAC,kBAAkB;QACrB,MAAM,IAAI,MAAM;IAClB;IAEA,MAAM,OAAO,IAAI,iKAAE,CAAC,IAAI,CAAC;QAAE;IAAiB;IAC5C,MAAM,UAAU,IAAI,gLAAQ,CAAC;IAE7B,OAAO,IAAI,+MAAY,CAAC;QAAE;IAAQ;AACpC;AAEO,MAAM,SAAS,gBAAgB,MAAM,IAAI;AAEhD,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 60, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayobami/align/lib/auth.ts"],"sourcesContent":["import NextAuth from \"next-auth\";\nimport Google from \"next-auth/providers/google\";\nimport { PrismaAdapter } from \"@auth/prisma-adapter\";\nimport { prisma } from \"./prisma\";\n\nexport const { handlers, signIn, signOut, auth } = NextAuth({\n  adapter: PrismaAdapter(prisma),\n  providers: [\n    Google({\n      clientId: process.env.GOOGLE_CLIENT_ID!,\n      clientSecret: process.env.GOOGLE_CLIENT_SECRET!,\n      authorization: {\n        params: {\n          prompt: \"consent\",\n          access_type: \"offline\",\n          response_type: \"code\",\n        },\n      },\n    }),\n  ],\n  session: {\n    strategy: \"database\",\n  },\n  pages: {\n    signIn: \"/login\",\n    error: \"/login\", // Redirect errors to login page\n  },\n  callbacks: {\n    async session({ session, user }) {\n      if (session.user) {\n        session.user.id = user.id;\n      }\n      return session;\n    },\n  },\n  debug: process.env.NODE_ENV === \"development\", // Enable debug logs in development\n});\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;;;;;;;;;AAEO,MAAM,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,IAAA,yKAAQ,EAAC;IAC1D,SAAS,IAAA,8KAAa,EAAC,gIAAM;IAC7B,WAAW;QACT,IAAA,yKAAM,EAAC;YACL,UAAU,QAAQ,GAAG,CAAC,gBAAgB;YACtC,cAAc,QAAQ,GAAG,CAAC,oBAAoB;YAC9C,eAAe;gBACb,QAAQ;oBACN,QAAQ;oBACR,aAAa;oBACb,eAAe;gBACjB;YACF;QACF;KACD;IACD,SAAS;QACP,UAAU;IACZ;IACA,OAAO;QACL,QAAQ;QACR,OAAO;IACT;IACA,WAAW;QACT,MAAM,SAAQ,EAAE,OAAO,EAAE,IAAI,EAAE;YAC7B,IAAI,QAAQ,IAAI,EAAE;gBAChB,QAAQ,IAAI,CAAC,EAAE,GAAG,KAAK,EAAE;YAC3B;YACA,OAAO;QACT;IACF;IACA,OAAO,oDAAyB;AAClC"}},
    {"offset": {"line": 120, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayobami/align/components/DashboardLayout.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/align/components/DashboardLayout.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/align/components/DashboardLayout.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,iRAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAwS,GACrU,sEACA","ignoreList":[0]}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayobami/align/components/DashboardLayout.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/align/components/DashboardLayout.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/align/components/DashboardLayout.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":";;;;AAAA,uEAAuE;AACvE;;uCACe,IAAA,iRAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAoR,GACjT,kDACA","ignoreList":[0]}},
    {"offset": {"line": 148, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":""}},
    {"offset": {"line": 158, "column": 0}, "map": {"version":3,"sources":["file:///Users/ayobami/align/app/integrations/page.tsx"],"sourcesContent":["import { auth } from '@/lib/auth';\nimport { redirect } from 'next/navigation';\nimport { prisma } from '@/lib/prisma';\nimport DashboardLayout from '@/components/DashboardLayout';\nimport { CheckCircle2, XCircle, Calendar, CheckSquare, BarChart3, Zap } from 'lucide-react';\nimport Link from 'next/link';\n\nexport const runtime = 'nodejs';\n\nexport default async function IntegrationsPage() {\n  const session = await auth();\n\n  if (!session || !session.user?.email) {\n    redirect('/login');\n  }\n\n  const user = await prisma.user.findUnique({\n    where: { email: session.user.email },\n    include: {\n      integrations: true,\n      checkIns: {\n        orderBy: { date: 'desc' },\n        take: 1,\n      },\n    },\n  });\n\n  const todoistIntegration = user?.integrations.find((i) => i.platform === 'todoist');\n  const calendarIntegration = user?.integrations.find((i) => i.platform === 'google_calendar');\n  const capacityScore = user?.checkIns[0]?.capacityScore;\n\n  const integrations = [\n    {\n      id: 'todoist',\n      name: 'Todoist',\n      description: 'Sync your tasks and get AI-powered prioritization',\n      icon: CheckSquare,\n      color: 'text-red-600',\n      bgColor: 'bg-red-50',\n      borderColor: 'border-red-200',\n      connected: !!todoistIntegration,\n      connectUrl: '/api/integrations/todoist/connect',\n      disconnectUrl: '/api/integrations/todoist/disconnect',\n      features: [\n        'Automatic task import',\n        'Two-way sync',\n        'Priority-based scheduling',\n        'Due date tracking',\n      ],\n    },\n    {\n      id: 'google-calendar',\n      name: 'Google Calendar',\n      description: 'Auto-schedule tasks as calendar events',\n      icon: Calendar,\n      color: 'text-blue-600',\n      bgColor: 'bg-blue-50',\n      borderColor: 'border-blue-200',\n      connected: !!calendarIntegration,\n      connectUrl: '/api/integrations/google-calendar/connect',\n      disconnectUrl: '/api/integrations/google-calendar/disconnect',\n      features: [\n        'Automatic time blocking',\n        'Smart scheduling',\n        'Conflict detection',\n        'Calendar sync',\n      ],\n    },\n    {\n      id: 'gemini',\n      name: 'Gemini AI',\n      description: 'AI-powered task prioritization and planning',\n      icon: Zap,\n      color: 'text-purple-600',\n      bgColor: 'bg-purple-50',\n      borderColor: 'border-purple-200',\n      connected: !!process.env.GEMINI_API_KEY,\n      features: [\n        'Intelligent task ordering',\n        'Capacity-aware scheduling',\n        'Reasoning explanations',\n        'Adaptive recommendations',\n      ],\n      isBuiltIn: true,\n    },\n    {\n      id: 'opik',\n      name: 'Opik Tracking',\n      description: 'Track AI performance and decision quality',\n      icon: BarChart3,\n      color: 'text-orange-600',\n      bgColor: 'bg-orange-50',\n      borderColor: 'border-orange-200',\n      connected: !!process.env.OPIK_API_KEY,\n      features: [\n        'AI decision logging',\n        'Performance metrics',\n        'Reasoning quality tracking',\n        'Capacity accuracy analysis',\n      ],\n      isBuiltIn: true,\n    },\n  ];\n\n  return (\n    <DashboardLayout user={session.user} capacityScore={capacityScore}>\n      <div className=\"p-8\">\n        <div className=\"max-w-6xl mx-auto\">\n          {/* Header */}\n          <div className=\"mb-8\">\n            <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">Integrations</h1>\n            <p className=\"text-gray-600\">\n              Connect your favorite tools to supercharge your productivity\n            </p>\n          </div>\n\n          {/* Integration Cards */}\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n            {integrations.map((integration) => {\n              const Icon = integration.icon;\n              \n              return (\n                <div\n                  key={integration.id}\n                  className={`bg-white rounded-xl border-2 ${\n                    integration.connected ? integration.borderColor : 'border-gray-200'\n                  } p-6 hover:shadow-lg transition-all`}\n                >\n                  {/* Header */}\n                  <div className=\"flex items-start justify-between mb-4\">\n                    <div className=\"flex items-center gap-3\">\n                      <div className={`p-3 rounded-lg ${integration.bgColor}`}>\n                        <Icon className={`w-6 h-6 ${integration.color}`} />\n                      </div>\n                      <div>\n                        <h3 className=\"text-lg font-bold text-gray-900\">{integration.name}</h3>\n                        {integration.isBuiltIn && (\n                          <span className=\"text-xs text-gray-500\">Built-in</span>\n                        )}\n                      </div>\n                    </div>\n                    {integration.connected ? (\n                      <div className=\"flex items-center gap-1 px-3 py-1 bg-emerald-50 text-emerald-700 rounded-full text-sm font-medium\">\n                        <CheckCircle2 className=\"w-4 h-4\" />\n                        Connected\n                      </div>\n                    ) : (\n                      <div className=\"flex items-center gap-1 px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-sm font-medium\">\n                        <XCircle className=\"w-4 h-4\" />\n                        Not Connected\n                      </div>\n                    )}\n                  </div>\n\n                  {/* Description */}\n                  <p className=\"text-gray-600 text-sm mb-4\">{integration.description}</p>\n\n                  {/* Features */}\n                  <div className=\"mb-6\">\n                    <p className=\"text-xs font-semibold text-gray-500 uppercase mb-2\">Features</p>\n                    <ul className=\"space-y-1\">\n                      {integration.features.map((feature, index) => (\n                        <li key={index} className=\"flex items-center gap-2 text-sm text-gray-700\">\n                          <div className=\"w-1.5 h-1.5 rounded-full bg-emerald-500\" />\n                          {feature}\n                        </li>\n                      ))}\n                    </ul>\n                  </div>\n\n                  {/* Action Button */}\n                  {!integration.isBuiltIn && (\n                    <div>\n                      {integration.connected ? (\n                        <form action={integration.disconnectUrl} method=\"POST\">\n                          <button\n                            type=\"submit\"\n                            className=\"w-full px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors text-sm font-medium\"\n                          >\n                            Disconnect\n                          </button>\n                        </form>\n                      ) : (\n                        <Link\n                          href={integration.connectUrl!}\n                          className=\"block w-full px-4 py-2 bg-gradient-to-r from-emerald-600 to-teal-600 text-white rounded-lg hover:from-emerald-700 hover:to-teal-700 transition-all text-center text-sm font-medium shadow-md hover:shadow-lg\"\n                        >\n                          Connect {integration.name}\n                        </Link>\n                      )}\n                    </div>\n                  )}\n\n                  {integration.isBuiltIn && (\n                    <div className=\"text-center text-sm text-gray-500\">\n                      {integration.connected ? 'Active and ready to use' : 'Configure in environment variables'}\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n\n          {/* Info Box */}\n          <div className=\"mt-8 p-6 bg-gradient-to-r from-emerald-50 to-teal-50 rounded-xl border border-emerald-200\">\n            <h3 className=\"text-lg font-bold text-gray-900 mb-2\">ðŸš€ How Integrations Work</h3>\n            <div className=\"space-y-2 text-sm text-gray-700\">\n              <p>\n                <strong>1. Connect your tools:</strong> Link Todoist for tasks and Google Calendar for scheduling\n              </p>\n              <p>\n                <strong>2. Complete daily check-in:</strong> Tell us your energy, sleep, and stress levels\n              </p>\n              <p>\n                <strong>3. Get AI-powered plan:</strong> Gemini AI creates an optimized schedule based on your capacity\n              </p>\n              <p>\n                <strong>4. Auto-schedule:</strong> Tasks are automatically added to your Google Calendar\n              </p>\n              <p>\n                <strong>5. Track & improve:</strong> Opik monitors AI decisions to continuously improve recommendations\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </DashboardLayout>\n  );\n}\n"],"names":[],"mappings":"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"}}]
}